# Cache
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.3.0.

## Wally Installation
To install with wally, insert it above wally.toml [dependecies]
```toml
Cache = "ernisto/cache@0.2.0"
```

## Problems
Implement ur own weak cache may be kinda ugly, specialy if ur cache have 2 keys/layers/dimensions, as u can see here
```lua
local cache = setmetatable({}, { __mode = 'k' })

local function CombatSession(player1: Player, player2: Player)
    
    if cache[player1] and cache[player1][player2] then return cache[player1][player2] end
    if cache[player2] and cache[player2][player1] then return cache[player2][player2] end
    
    local promise = Promise.new(coroutine.yield)
    cache[player1] = cache[player] or setmetatable({}, { __mode = 'k'})
    cache[player1][player2] = promise
    
    --// Instance
    local data = someYieldingFunction()
    local self = {}
    
    promise:_resolve(self)
    return promise
end
```

## Solution
```lua
--// Vars
local cache = Cache.async('k', 'k')
-- setmetatable({
--     [player1] = setmetatable({ [player2] = CombatSession }, { __mode = 'k' })
-- }, { __mode = 'k' })

--// Component
local function CombatSessionAsync(player1: Player, player2: Player)
    
    local promise, resolve = cache:find(player2, player1) or cache:getPromise(player1, player2)
    if not resolve then return promise end
    
    --// Instance
    local data = someYieldingCall()
    local self = {}
    
    --// End
    return resolve(self)
end
```